<!DOCTYPE html>
<!-- #footer 부분이 detail과 다름 !  -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="../js/jquery-1.12.1.min.js"></script>
    <title>Document</title>
</head>

<body>
    <header id ="header" >
        <div id = "topimg"><a href ="###"><img  src="https://ifh.cc/g/1j0ndy.png' border='0'" width = "130" height = "40" alt="사이트로고"></div></a>
        <div id = "toptext">강의리스트</div>
        <div id ="hr">
            <a th:href="@{mypage(uno=${session.uno})}"><i class="fa-solid fa-user-graduate"></i> [[${session.userName}]]님 환영합니다!&nbsp&nbsp</a>
            <a href="../user/logout"><i class="fa-solid fa-lock-open"></i>로그아웃</a>
            
        </div>
    </header>

    <div class="container">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr id = "table_top">
                        <th scope="tit"></th>
                        <th scope="tit" id="day">월요일</th>
                        <th scope="tit" id="day">화요일</th>
                        <th scope="tit" id="day">수요일</th>
                        <th scope="tit" id="day">목요일</th>
                        <th scope="tit" id="day">금요일</th>
                    </tr>
                </thead>

                <tbody>
                    <tr id="contents">
                        <td class="noBorder" id="time">오전09:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오전10:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오전11:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후12:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후01:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후02:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후03:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후04:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후05:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                    <tr id="contents">
                        <td class="noBorder" id="time">오후06:00</td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                        <td class="noBorder"></td>
                    </tr>
                </tbody>

            </table>

        </div>

    </div>
    
    <footer id = "footer">
        <a href="###"><div>이용약관</div></a>
        <a href="###"><div>개인정보 처리방침</div></a>
        <a href="###"><div>운영정책</div></a>
        <a href="###"><div>고객센터</div></a>
        <a href="###"><div>공지사항</div></a>
    </footer>

</body>

<script th:inline="javascript">
	
    var values = /*[[${list}]]*/ 'default';  // controller에서 넘어온 값 저장
    
    // table cell value 삽입
    for (var l = 0; l < values.length; l++) {
            var startTime = values[l]["startTime"];
            startTime = parseInt(startTime);
            var endTime = values[l]["endTime"];
            endTime = parseInt(endTime);
            for (var j = 0; j <= 4; j++) {
                if (values[l]["day"] == $("th#day:eq("+ j +")").text()) {
                    for (var i = 1; i <= endTime - startTime + 1; i++) {
                        for (var k = 0; k <=8; k++) {
                            if (startTime == k + 9) {
                                $("tr:eq("+ (i + k) +") td:eq("+ (j + 1) +")").html(values[l]["title"]);
                            }
                        }
                    }
                }
            }
        }

	
	// table cell color 지정
    $("td#time").css("background-color", " #e3e3e3");
    $("td.noBorder:empty").css("background-color", " #e3e3e3");
    var randomColor = "#" + Math.round(Math.random() * 0xffffff).toString(16);

    // table cell merge
    function mergeTable(target, index) {
        var loop = null;
        var startIndx = 0; // 최초 td태그의 index
        var addNum = 1; // 마지막 td태그의 index
        $(target).find("tr").each(function(idx) {
            var targetText = $(this).find("td").eq(index).text();
            if (!loop) { // 최초 동작이라면
                loop = targetText;
                startIndx = idx;
            } else if (targetText == loop) { // 같은 열이 있다면
                addNum++;
                // 같은 열인데 마지막이다?!
                if (idx == $(target).find("tr").length - 1) {
                    $(target).find("tr").eq(startIndx).find("td").eq(index).attr("rowspan", addNum).css("vertical-align", "middle");
                    for (var i = startIndx + 1; i < startIndx + addNum; i++) {
                        $(target).find("tr").eq(i).find("td").eq(index).hide();
                    }
                }
            } else { // 다른 텍스트가 발견되었다!
                if (addNum != 1) { // merge가 필요하다!
                    $(target).find("tr").eq(startIndx).find("td").eq(index).attr("rowspan", addNum).css("vertical-align", "middle");
                    for (var i = startIndx + 1; i < startIndx + addNum; i++) {
                        $(target).find("tr").eq(i).find("td").eq(index).hide();
                    }
                }
	            $(target).find("tr").eq(startIndx).find("td").eq(index).attr("rowspan", addNum).on("click", function() {
	                var qDelete = confirm("삭제하시겠습니까?");
	                if (qDelete) {
	                	alert("강의가 성공적으로 삭제되었습니다.");
	                	location.replace("register/delete");
	                }
	                	location.replace("mypage");
	            });

                startIndx = idx;
                loop = targetText;
                addNum = 1;
            }
        });
    }
    // $(target).find("tr").eq(startIndx).find("td").eq(index).attr("rowspan", addNum).css("vertical-align", "middle");
    mergeTable(".table", 1);
    mergeTable(".table", 2);
    mergeTable(".table", 3);
    mergeTable(".table", 4);
    mergeTable(".table", 5);

</script>

</html>

<style>
   @font-face {
        font-family: 'KOTRA_BOLD-Bold';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-10-21@1.1/KOTRA_BOLD-Bold.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    * {
        font-family: 'KOTRA_BOLD-Bold';
    }
    #toptext {
        font-size: large;
    }
    html {
        height: 100%;
    }
    body {
        background: #f7f5f1;
        color: black;
        height: 100%;
        margin: auto;
        padding: 0;
    }
    #header{
        display:flex;
        align-items: center;
        background-color:#FDF5E6;
        width: 100%;
        height: 10%;
        font-weight: 700;
        border-bottom: 1px solid;
    }
    #topimg{
        display:flex;
        align-items: flex-end;
        margin-right: 1rem;
        margin-left: 2rem;
    }
    #hr{
        margin-left: auto;
        margin-right: 3rem;
    }
    table {
        width: 70%;
        height: 70%;
        margin: auto;
        margin-top: 50px;

    }
    #table_top {
        height: 50px;
    }
    td {
        height: 10px;
        width: 120px;
    }
    tr:nth-child(even) {
        background-color: #ffcece;
    }
    tr:nth-child(odd) {
        background-color: #ffcece;
    }
    th {
        background-color: #FFE07A;
        color: black;
    }
    .noBorder {
        border: none !important;
        color: black;
    }
    #footer {
        display: flex;
        align-items: center;
        flex-direction: row;
        justify-content: space-evenly;
        background-color: #FDF5E6;
        width: 100%;
        height: 10%;
        font-size: 10px;
        border: solid 2px;
        border-left: 0px;
        border-right: 0;
        font-weight: 700;
        position: absolute; 
        
    }
    .container{
        width:100%;
       
    }
    #contents {
        text-align: center;
        color: black;
        height: 45px;
    }
    a { text-decoration: none; color: black; }
    a:visited { text-decoration: none; }
    a:hover { text-decoration: none; }
    a:focus { text-decoration: none; }
    a:hover, a:active { text-decoration: none; }
    
</style>